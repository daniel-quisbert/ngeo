(function(){'use strict';var aa=this;function ba(a,b){a=a.split(".");var c=aa;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===b?c[e]?c=c[e]:c=c[e]={}:c[e]=b}function ca(a,b){function c(){}c.prototype=b.prototype;a.cb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Na=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};function k(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function m(){}var da=0;function ea(a){this.message="Assertion failed. See /doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}k(ea,Error);var q="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||!a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),e=1,d=arguments.length;e<d;++e){var f=arguments[e];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function fa(a){for(var b in a)delete a[b]};function ga(a){function b(b){var e=a.listener,d=a.ea||a.target;a.ga&&ha(a);return e.call(d,b)}return a.fa=b}function ia(a,b,c,e){for(var d,f=0,g=a.length;f<g;++f)if(d=a[f],d.listener===b&&d.ea===c)return e&&(d.deleteIndex=f),d}function ja(a,b){return(a=a.R)?a[b]:void 0}function t(a,b,c,e){var d,f=a.R;f||(f=a.R={});d=f;(f=d[b])||(f=d[b]=[]);(d=ia(f,c,e,!1))?d.ga=!1:(d={ea:e,ga:!1,listener:c,target:a,type:b},a.addEventListener(b,ga(d)),f.push(d));return d}
function ka(a,b,c,e){(a=ja(a,b))&&(c=ia(a,c,e,!0))&&ha(c)}function ha(a){if(a&&a.target){a.target.removeEventListener(a.type,a.fa);var b=ja(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);if(0===b.length){var b=a.target,c=a.type,e=ja(b,c);if(e){for(var d=0,f=e.length;d<f;++d)b.removeEventListener(c,e[d].fa),fa(e[d]);e.length=0;if(e=b.R)delete e[c],0===Object.keys(e).length&&delete b.R}}}fa(a)}};function ma(){};function v(a){this.type=a;this.target=null}v.prototype.preventDefault=v.prototype.stopPropagation=function(){this.za=!0};function w(){this.D={};this.j={};this.C={}}k(w,ma);w.prototype.addEventListener=function(a,b){var c=this.C[a];c||(c=this.C[a]=[]);-1===c.indexOf(b)&&c.push(b)};function na(a,b){var c="string"===typeof b?new v(b):b;b=c.type;c.target=a;var e=a.C[b];if(e){b in a.j||(a.j[b]=0,a.D[b]=0);++a.j[b];for(var d=0,f=e.length;d<f&&!1!==e[d].call(a,c)&&!c.za;++d);--a.j[b];if(0===a.j[b]){c=a.D[b];for(delete a.D[b];c--;)a.removeEventListener(b,m);delete a.j[b]}}}
w.prototype.removeEventListener=function(a,b){var c=this.C[a];c&&(b=c.indexOf(b),a in this.D?(c[b]=m,++this.D[a]):(c.splice(b,1),0===c.length&&delete this.C[a]))};function x(){w.call(this);this.Z=0}k(x,w);x.prototype.b=function(){++this.Z;na(this,"change")};x.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var e=a.length,d=Array(e),f=0;f<e;++f)d[f]=t(this,a[f],b,c);return d}return t(this,a,b,c)};function oa(a,b,c){v.call(this,a);this.key=b;this.oldValue=c}k(oa,v);function y(a){x.call(this);this.la||(this.la=++da);this.v={};void 0!==a&&pa(this,a)}k(y,x);var qa={};function ra(a){return qa.hasOwnProperty(a)?qa[a]:qa[a]="change:"+a}y.prototype.get=function(a){var b;this.v.hasOwnProperty(a)&&(b=this.v[a]);return b};y.prototype.set=function(a,b,c){c?this.v[a]=b:(c=this.v[a],this.v[a]=b,c!==b&&(b=ra(a),na(this,new oa(b,a,c)),na(this,new oa("propertychange",a,c))))};
function pa(a,b){for(var c in b)a.set(c,b[c],void 0)};function sa(a,b,c,e,d){return d?(d[0]=a,d[1]=b,d[2]=c,d[3]=e,d):[a,b,c,e]}function ta(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]};var ua=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function va(a){this.radius=a}function wa(a,b){var c=a[1]*Math.PI/180,e=b[1]*Math.PI/180,d=(e-c)/2;a=(b[0]-a[0])*Math.PI/180/2;c=Math.sin(d)*Math.sin(d)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(e);return 2*xa.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}
va.prototype.offset=function(a,b,c){var e=a[1]*Math.PI/180;b/=this.radius;var d=Math.asin(Math.sin(e)*Math.cos(b)+Math.cos(e)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(e),Math.cos(b)-Math.sin(e)*Math.sin(d)))/Math.PI,180*d/Math.PI]};var xa=new va(6370997);var ya={};ya.degrees=2*Math.PI*xa.radius/360;ya.ft=.3048;ya.m=1;ya["us-ft"]=1200/3937;
function z(a){this.i=a.code;this.a=a.units;this.j=void 0!==a.extent?a.extent:null;this.c=void 0!==a.N?a.N:this.g;this.b=a.ia;var b=za,c=a.code,e=Aa||window.proj4;if("function"==typeof e&&void 0===b[c]){var d=e.defs(c);if(void 0!==d){void 0===a.ia&&(this.b=d.to_meter);void 0===a.units&&(this.a=d.units);var f,g;for(f in b)if(a=e.defs(f),void 0!==a)if(b=A(f),a===d)Ba([b,this]);else{g=e(f,c);a=g.forward;g=g.inverse;var b=A(b),h=A(this);B(b,h,Ca(a));B(h,b,Ca(g))}}}}z.prototype.B=function(){return this.j};
z.prototype.g=function(a,b){if("degrees"==this.a)return a;var c=Da(this,A("EPSG:4326"));a=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2];a=c(a,a,2);c=(wa(a.slice(0,2),a.slice(2,4))+wa(a.slice(4,6),a.slice(6,8)))/2;a=this.b||ya[this.a];void 0!==a&&(c/=a);return c};z.prototype.N=function(a,b){return this.c(a,b)};var za={},C={},Aa=null;function Ba(a){Ea(a);a.forEach(function(b){a.forEach(function(a){b!==a&&B(b,a,Fa)})})}function Ga(a){za[a.i]=a;B(a,a,Fa)}
function Ea(a){var b=[];a.forEach(function(a){b.push(Ga(a))})}function B(a,b,c){a=a.i;b=b.i;a in C||(C[a]={});C[a][b]=c}function Ca(a){return function(b,c,e){var d=b.length;e=void 0!==e?e:2;c=void 0!==c?c:Array(d);var f,g;for(g=0;g<d;g+=e)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=e-1;2<=f;--f)c[g+f]=b[g+f];return c}}
function A(a){var b;if(a instanceof z)b=a;else if("string"===typeof a){b=za[a];var c=Aa||window.proj4;void 0===b&&"function"==typeof c&&void 0!==c.defs(a)&&(b=new z({code:a}),Ga(b))}return b||null}function Ha(a,b){a=A(a);b=A(b);return Da(a,b)}function Da(a,b){a=a.i;b=b.i;var c;a in C&&b in C[a]&&(c=C[a][b]);void 0===c&&(c=Ia);return c}function Ia(a,b){if(void 0!==b&&a!==b){for(var c=0,e=a.length;c<e;++c)b[c]=a[c];a=b}return a}
function Fa(a,b){if(void 0!==b){for(var c=0,e=a.length;c<e;++c)b[c]=a[c];a=b}else a=a.slice();return a}function Ja(a,b,c){b=Ha(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var e=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,e);c=Math.max.apply(null,c);e=Math.max.apply(null,e);return sa(a,b,c,e,void 0)};function D(){y.call(this);this.Y=[Infinity,Infinity,-Infinity,-Infinity];this.aa=-1}k(D,y);D.prototype.B=function(a){this.aa!=this.Z&&(this.Y=this.X(this.Y),this.aa=this.Z);var b=this.Y;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};D.prototype.transform=function(a,b){this.G(Ha(a,b));return this};(function(){if(!("HTMLCanvasElement"in window))return!1;try{return document.createElement("CANVAS").getContext("2d")?!0:!1}catch(a){return!1}})();function E(a){y.call(this);this.a="geometry";this.c=this.f=null;t(this,ra(this.a),this.g,this);void 0!==a&&(a instanceof D||!a?this.set(this.a,a):pa(this,a))}k(E,y);E.prototype.clone=function(){var a=new E(q({},this.v));Ka(a,this.a);var b=this.get(this.a);b&&(b=b.clone(),a.set(a.a,b));(b=this.f)&&a.setStyle(b);return a};E.prototype.G=function(){this.b()};E.prototype.g=function(){this.c&&(ha(this.c),this.c=null);var a=this.get(this.a);a&&(this.c=t(a,"change",this.G,this));this.b()};
E.prototype.setStyle=function(a){if((this.f=a)&&"function"!==typeof a&&!Array.isArray(a))throw new ea(41);this.b()};function Ka(a,b){ka(a,ra(a.a),a.g,a);a.a=b;t(a,ra(a.a),a.g,a);a.g()};function La(){this.a=this.A=null};function F(){D.call(this);this.layout="XY";this.c=2;this.a=null}k(F,D);function Ma(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}F.prototype.X=function(a){var b=this.a,c=this.a.length,e=this.c;a=sa(Infinity,Infinity,-Infinity,-Infinity,a);for(var d=0;d<c;d+=e){var f=a,g=b[d],h=b[d+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a};function G(a,b,c){a.c=Ma(b);a.layout=b;a.a=c}
function H(a,b,c,e){if(b)c=Ma(b);else{for(b=0;b<e;++b){if(0===c.length){a.layout="XY";a.c=2;return}c=c[0]}c=c.length;var d;2==c?d="XY":3==c?d="XYZ":4==c&&(d="XYZM");b=d}a.layout=b;a.c=c}F.prototype.G=function(a){this.a&&(a(this.a,this.a,this.c),this.b())};
F.prototype.rotate=function(a,b){var c=this.a;if(c){var e=c.length,d=this.c,f=c?c:[],g=Math.cos(a);a=Math.sin(a);var h=b[0];b=b[1];for(var n=0,r=0;r<e;r+=d){var l=c[r]-h,p=c[r+1]-b;f[n++]=h+l*g-p*a;f[n++]=b+l*a+p*g;for(l=r+2;l<r+d;++l)f[n++]=c[l]}c&&f.length!=n&&(f.length=n);this.b()}};
F.prototype.scale=function(a,b,c){var e=b;void 0===e&&(e=a);var d=c;d||(d=ta(this.B()));if(c=this.a){b=c.length;for(var f=this.c,g=c?c:[],h=d[0],d=d[1],n=0,r=0;r<b;r+=f){var l=c[r]-h,p=c[r+1]-d;g[n++]=h+a*l;g[n++]=d+e*p;for(l=r+2;l<r+f;++l)g[n++]=c[l]}c&&g.length!=n&&(g.length=n);this.b()}};F.prototype.translate=function(a,b){var c=this.a;if(c){var e=c.length,d=this.c,f=c?c:[],g=0,h,n;for(h=0;h<e;h+=d)for(f[g++]=c[h]+a,f[g++]=c[h+1]+b,n=h+2;n<h+d;++n)f[g++]=c[n];c&&f.length!=g&&(f.length=g);this.b()}};function Na(a,b,c,e){var d,f;d=0;for(f=c.length;d<f;++d){var g=c[d],h;for(h=0;h<e;++h)a[b++]=g[h]}return b}function Oa(a,b,c,e,d){d=d?d:[];var f=0,g,h;g=0;for(h=c.length;g<h;++g)b=Na(a,b,c[g],e),d[f++]=b;d.length=f;return d};function Pa(a,b){F.call(this);this.g(a,b)}k(Pa,F);Pa.prototype.clone=function(){var a=new Pa(null);G(a,this.layout,this.a.slice());a.b();return a};Pa.prototype.g=function(a,b){a?(H(this,b,a,1),this.a||(this.a=[]),this.a.length=Na(this.a,0,a,this.c)):G(this,"XY",null);this.b()};navigator.userAgent.match("CriOS");try{new MouseEvent("click",{buttons:1})}catch(a){};function I(a,b){F.call(this);this.g(a,b)}k(I,F);I.prototype.clone=function(){var a=new I(null);G(a,this.layout,this.a.slice());a.b();return a};I.prototype.X=function(a){var b=this.a,c=b[0],b=b[1];return sa(c,b,c,b,a)};I.prototype.g=function(a,b){if(a){H(this,b,a,0);this.a||(this.a=[]);var c=b=this.a,e=0,d,f;d=0;for(f=a.length;d<f;++d)c[e++]=a[d];b.length=e}else G(this,"XY",null);this.b()};function Qa(a,b){F.call(this);this.f=[];this.g(a,b)}k(Qa,F);Qa.prototype.clone=function(){var a=new Qa(null),b=this.f.slice();G(a,this.layout,this.a.slice());a.f=b;a.b();return a};Qa.prototype.g=function(a,b){a?(H(this,b,a,2),this.a||(this.a=[]),a=Oa(this.a,0,a,this.c,this.f),this.a.length=0===a.length?0:a[a.length-1]):(a=this.f,G(this,"XY",null),this.f=a);this.b()};function Ra(a){z.call(this,{code:a,units:"m",extent:Sa,global:!0,Da:Ta})}k(Ra,z);Ra.prototype.N=function(a,b){return a/ua(b[1]/6378137)};var J=6378137*Math.PI,Sa=[-J,-J,J,J],Ta=[-180,-85,180,85],Ua="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Ra(a)});
function Va(a,b,c){var e=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(e));for(var d=0;d<e;d+=c){b[d]=J*a[d]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[d+1]+90)/360));f>J?f=J:f<-J&&(f=-J);b[d+1]=f}return b}function Wa(a,b,c){var e=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(e));for(var d=0;d<e;d+=c)b[d]=180*a[d]/J,b[d+1]=360*Math.atan(Math.exp(a[d+1]/6378137))/Math.PI-90;return b};var Xa=new va(6378137);function K(a,b){z.call(this,{code:a,units:"degrees",extent:Ya,Ma:b,global:!0,ia:Za,Da:Ya})}k(K,z);K.prototype.N=function(a){return a};var Ya=[-180,-90,180,90],Za=Math.PI*Xa.radius/180,$a=[new K("CRS:84"),new K("EPSG:4326","neu"),new K("urn:ogc:def:crs:EPSG::4326","neu"),new K("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new K("urn:ogc:def:crs:OGC:1.3:CRS84"),new K("urn:ogc:def:crs:OGC:2:84"),new K("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new K("urn:x-ogc:def:crs:EPSG:4326","neu")];Ba(Ua);Ba($a);$a.forEach(function(a){Ua.forEach(function(b){B(a,b,Va);B(b,a,Wa)})});function L(){return{restrict:"A",link:function(a,b,c){var e=a.$eval(c.ngeoSearch),d=a.$eval(c.ngeoSearchDatasets).slice();d.unshift(e);b.typeahead.apply(b,d);c=a.$eval(c.ngeoSearchListeners);var f=L.a(c);b.on("typeahead:open",function(){a.$apply(function(){f.open()})});b.on("typeahead:close",function(){a.$apply(function(){f.close()})});b.on("typeahead:cursorchange",function(b,c,e){a.$apply(function(){f.cursorchange(b,c,e)})});b.on("typeahead:select",function(b,c,e){a.$apply(function(){f.select(b,
c,e)})});b.on("typeahead:autocomplete",function(b,c,e){a.$apply(function(){f.autocomplete(b,c,e)})})}}}L.a=function(a){var b;a?b={open:void 0!==a.open?a.open:m,close:void 0!==a.close?a.close:m,cursorchange:void 0!==a.cursorchange?a.cursorchange:m,select:void 0!==a.select?a.select:m,autocomplete:void 0!==a.autocomplete?a.autocomplete:m}:b={open:m,close:m,cursorchange:m,select:m,autocomplete:m};return b};L.module=angular.module("ngeoSearchDirective",[]);L.module.directive("ngeoSearch",L);function ab(){La.call(this)}k(ab,La);function bb(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null};function M(a){D.call(this);this.a=a?a:null;cb(this)}k(M,D);function cb(a){var b,c;if(a.a)for(b=0,c=a.a.length;b<c;++b)t(a.a[b],"change",a.b,a)}M.prototype.clone=function(){var a=new M(null),b=this.a,c=[],e,d;e=0;for(d=b.length;e<d;++e)c.push(b[e].clone());if(a.a)for(b=0,e=a.a.length;b<e;++b)ka(a.a[b],"change",a.b,a);a.a=c;cb(a);a.b();return a};
M.prototype.X=function(a){sa(Infinity,Infinity,-Infinity,-Infinity,a);for(var b=this.a,c=0,e=b.length;c<e;++c){var d=a,f=b[c].B();f[0]<d[0]&&(d[0]=f[0]);f[2]>d[2]&&(d[2]=f[2]);f[1]<d[1]&&(d[1]=f[1]);f[3]>d[3]&&(d[3]=f[3])}return a};M.prototype.rotate=function(a,b){for(var c=this.a,e=0,d=c.length;e<d;++e)c[e].rotate(a,b);this.b()};M.prototype.scale=function(a,b,c){c||(c=ta(this.B()));for(var e=this.a,d=0,f=e.length;d<f;++d)e[d].scale(a,b,c);this.b()};
M.prototype.G=function(a){var b=this.a,c,e;c=0;for(e=b.length;c<e;++c)b[c].G(a);this.b()};M.prototype.translate=function(a,b){var c=this.a,e,d;e=0;for(d=c.length;e<d;++e)c[e].translate(a,b);this.b()};function db(a,b){F.call(this);this.f=[];this.g(a,b)}k(db,F);db.prototype.clone=function(){var a=new db(null),b=this.f.slice();G(a,this.layout,this.a.slice());a.f=b;a.b();return a};db.prototype.g=function(a,b){a?(H(this,b,a,2),this.a||(this.a=[]),a=Oa(this.a,0,a,this.c,this.f),this.a.length=0===a.length?0:a[a.length-1]):(a=this.f,G(this,"XY",null),this.f=a);this.b()};function eb(a,b){F.call(this);this.g(a,b)}k(eb,F);eb.prototype.clone=function(){var a=new eb(null);G(a,this.layout,this.a.slice());a.b();return a};eb.prototype.g=function(a,b){a?(H(this,b,a,1),this.a||(this.a=[]),this.a.length=Na(this.a,0,a,this.c)):G(this,"XY",null);this.b()};function fb(a,b){F.call(this);this.f=[];this.g(a,b)}k(fb,F);fb.prototype.clone=function(){for(var a=new fb(null),b=this.f.length,c=Array(b),e=0;e<b;++e)c[e]=this.f[e].slice();G(a,this.layout,this.a.slice());a.f=c;a.b();return a};
fb.prototype.g=function(a,b){if(a){H(this,b,a,3);this.a||(this.a=[]);b=this.a;var c=this.c,e=this.f,d=0,e=e?e:[],f=0,g,h;g=0;for(h=a.length;g<h;++g)d=Oa(b,d,a[g],c,e[f]),e[f++]=d,d=d[d.length-1];e.length=f;0===e.length?this.a.length=0:(a=e[e.length-1],this.a.length=0===a.length?0:a[a.length-1])}else a=this.f,G(this,"XY",null),this.f=a;this.b()};function gb(a){a=a?a:{};La.call(this);this.A=A(a.A?a.A:"EPSG:4326");a.u&&(this.a=A(a.u));this.b=a.geometryName}k(gb,ab);function hb(a,b){var c;if(a){a=(0,ib[a.type])(a);var e=b?A(b.u):null;b=b?A(b.w):null;var d;if(d=e&&b)e===b?d=!0:(d=e.a===b.a,d=e.i===b.i?d:Da(e,b)===Fa&&d),d=!d;d?a instanceof D?c=a.transform(b,e):c=Ja(a,b,e):c=a}else c=null;return c}
var ib={Point:function(a){return new I(a.coordinates)},LineString:function(a){return new Pa(a.coordinates)},Polygon:function(a){return new Qa(a.coordinates)},MultiPoint:function(a){return new eb(a.coordinates)},MultiLineString:function(a){return new db(a.coordinates)},MultiPolygon:function(a){return new fb(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return hb(a,b)});return new M(a)}};
function jb(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=hb(b.geometry,c);var e=new E;a.b&&Ka(e,a.b);e.set(e.a,c);void 0!==b.id&&e.b();b.properties&&pa(e,b.properties);return e};function kb(a,b,c,e,d,f){var g=new gb;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){void 0!==b&&(a={type:"FeatureCollection",features:a.features.filter(b)});var d=a,f={u:c,w:e};a=bb(d);var l;if(f){if(f.w)l=f.w;else if(l=bb(d).crs)if("name"==l.type)l=A(l.properties.name);else if("EPSG"==l.type)l=A("EPSG:"+l.properties.code);else throw new ea(36);else l=g.A;l={w:l,u:f.u}}f=q({w:g.A,u:g.a},l);if("FeatureCollection"===a.type){l=[];a=a.features;
var p,d=0;for(p=a.length;d<p;++d)l.push(jb(g,a[d],f))}else l=[jb(g,a,f)];return l}},datumTokenizer:m,queryTokenizer:Bloodhound.tokenizers.whitespace};d=q({},d||{});f=q({},f||{});d.remote&&(q(f,d.remote),delete d.remote);q(a,d);q(a.remote,f);return new Bloodhound(a)}kb.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);kb.module.value("ngeoSearchCreateGeoJSONBloodhound",kb);var lb=angular.module("ngeoSearchModule",[L.module.name,kb.module.name]);var mb=angular.module("ngeo.fileService",[]);
mb.service("ngeoFile",function(a,b,c){var e,d;this.c=function(a){return!(2E7<a)};this.b=function(b){var d=a.defer();e&&e.abort();e=new FileReader;e.onload=function(a){d.resolve(a.target.result)};e.onerror=function(a){a=a.target.error;c.console.error("Reading file failed: ",a);d.reject({message:20==a.code?"operation_canceled":"read_failed",reason:a.message})};e.onprogress=function(a){d.notify(a)};e.readAsText(b);return d.promise};this.a=function(e,g){d&&d.resolve();d=g||a.defer();var h=a.defer();b.get(e,
{timeout:d.promise}).then(function(a){h.resolve(a.data)},function(a){c.console.error("Uploading file failed: ",a);h.reject({message:"upload_failed",reason:a})});return h.promise}});var nb;
(function(){function a(a,b,d,f,g){return{restrict:"A",templateUrl:g,scope:{options:"=ngeoImportDndOptions"},link:function(g,n){var r=g.options;if(r&&"function"===typeof r.handleFileContent){g.handleFileContent=r.handleFileContent;n.click(function(){this.style.display="none"}).on("dragleave drop",function(){this.style.display="none"}).on("dragover dragleave drop",function(a){a.stopPropagation();a.preventDefault()}).on("drop",function(b){var e=b.originalEvent.dataTransfer.files;if(e&&0<e.length)f.b(e[0]).then(function(a){g.handleFileContent(a,e[0])});
else if(b.originalEvent.dataTransfer.types){var l=b.originalEvent.dataTransfer.getData("text/plain");if(r.isValidUrl(l))f.a(l).then(function(a){return g.handleFileContent(a,{url:l})})["catch"](function(b){a.alert(d.getString(b.message))});else a.alert(d.getString("invalid_url")+l)}});var l=function(a){a.stopPropagation();a.preventDefault();a=a.originalEvent.dataTransfer.types||[];for(var b=0,c=a.length;b<c;++b)if(/(files|text\/plain)/i.test(a[b])){n.css("display","table");break}};b.on("dragenter",
l);var p=function(){return!1};b.on("dragstart",p);g.$on("$destroy",function(){b.off("dragEnter",l).off("dragstart",p)})}else n.remove()}}}var b=angular.module("ngeo.importDndDirective",["gettext",mb.name]);nb=b;b.value("ngeoImportDndTemplateUrl",function(a,b){a=b.ngeoImportDndTemplateUrl;return void 0!==a?a:N+"/../../modules/import/partials/import-dnd.html"});a.$inject=["$window","$document","gettextCatalog","ngeoFile","ngeoImportDndTemplateUrl"];b.directive("ngeoImportDnd",a)})();var ob;
(function(){function a(a,b,d){var f;return{restrict:"A",templateUrl:d,scope:{options:"=ngeoImportLocalOptions"},link:function(d,h){var n=d.options;if(n&&"function"===typeof n.handleFileContent){d.handleFileContent=d.options.handleFileContent;var r=function(){d.l="load_kml";d.progress=0;d.o=null};r();n=function(){h.find('input[type="file"]').click()};h.find("button.ngeo-import-browse").click(n);h.find("input.form-control[type=text][readonly]").click(n);h.find("input[type=file]").bind("change",function(a){a.target.files&&
0<a.target.files.length&&d.$apply(function(){d.files=a.target.files})});d.$watchCollection("files",function(){if(d.files&&0<d.files.length){var a=d.files[0];d.file=a;d.fileSize=a.size;d.Ua&&d.sa()}});d.Va=function(){return 0<d.progress&&100>d.progress};d.va=function(a){return!a||b.c(a.size)};d.cancel=function(){d.o&&(d.o.abort(),d.o=null)};d.sa=function(){d.file&&(d.P=!0,d.l="reading_file",a.cancel(f),b.b(d.file).then(function(a){d.o=null;d.l="parsing_file";return d.handleFileContent(a,d.file)}).then(function(){d.l=
"parse_succeeded"},function(a){d.l=a.message},function(a){d.o||(d.o=a.target)}).finally(function(){d.o=null;d.P=!1;f=a(r,5E3)}))}}else h.remove()}}}var b=angular.module("ngeo.importLocalDirective",[mb.name]);ob=b;b.value("ngeoImportLocalTemplateUrl",function(a,b){a=b.ngeoImportLocalTemplateUrl;return void 0!==a?a:N+"/../../modules/import/partials/import-local.html"});a.$inject=["$timeout","ngeoFile","ngeoImportLocalTemplateUrl"];b.directive("ngeoImportLocal",a)})();var pb;
(function(){function a(a,b,d,f,g){var h;return{restrict:"A",templateUrl:g,scope:{options:"=ngeoImportOnlineOptions"},link:function(f,g){var l=f.options;if(l&&"function"===typeof l.handleFileContent){f.handleFileContent=l.handleFileContent;var p=function(){f.l="connect";f.progress=0;f.P=!1};p();var u;u=u&&0<u.length&&u[0].name?f.options.urls.reduce(function(a,b){a.push({name:b,url:b});return a},[]):f.options.urls;var la=g.find("input[name=url]").typeahead({hint:!0,highlight:!0,minLength:0},{name:"wms",
Pa:"name",limit:500,source:function(a){return function(b,c){var d=[];if(b){var e=new RegExp(b,"i");a.forEach(function(a){e.test(a.name)&&d.push(a)})}else d=a;c(d)}}(u)}).on("typeahead:selected",function(a,b){la.typeahead("close");f.M=b.url;f.ha();f.$digest()}).on("focus",function(){});f.$on("gettextLanguageChanged",function(){f.M&&/lang=/.test(f.M)&&f.ha()});f.cancel=function(){f.progress=0;f.s&&(f.s.resolve(),f.s=null)};f.va=function(a){return l.isValidUrl?l.isValidUrl(a):!0};f.ha=function(){var g=
f.M;l.transformUrl&&(g=l.transformUrl(g));f.s=a.defer();f.P=!0;f.l="dowloading_file";b.cancel(h);d.a(g,f.s).then(function(a){f.s=null;return f.handleFileContent(a,{url:f.M})}).then(function(a){f.l=a.message},function(a){f.l=a.message}).finally(function(){f.s=null;f.P=!1;h=b(p,1E4)})}}else g.remove()}}}var b=angular.module("ngeo.importOnlineDirective",[mb.name,"gettext"]);pb=b;b.value("ngeoImportOnlineTemplateUrl",function(a,b){a=b.ngeoImportOnlineTemplateUrl;return void 0!==a?a:N+"/../../modules/import/partials/import-online.html"});
a.$inject=["$q","$timeout","ngeoFile","gettextCatalog","ngeoImportOnlineTemplateUrl"];b.directive("ngeoImportOnline",a)})();function qb(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function rb(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)rb(a,b,c);return c}function sb(){var a=O;return function(b,c){b=a.call(this,b,c);void 0!==b&&c[c.length-1].push(b)}}function P(a){return function(b,c){var e=a.call(this,b,c);if(void 0!==e){c=c[c.length-1];b=b.localName;var d;b in c?d=c[b]:d=c[b]=[];d.push(e)}}}
function Q(a){return function(b,c){var e=a.call(this,b,c);void 0!==e&&(c[c.length-1][b.localName]=e)}}function R(a,b){var c={},e,d;e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}function S(a,b,c,e){e.push(a);for(a=c.firstElementChild;a;a=a.nextElementSibling)c=b[a.namespaceURI],void 0!==c&&(c=c[a.localName])&&c.call(void 0,a,e);return e.pop()};function tb(){}function ub(a){var b=new vb;return a instanceof Document?wb(b,a):a instanceof Node?xb(b,a):"string"===typeof a?(a=(new DOMParser).parseFromString(a,"application/xml"),wb(b,a)):null};function T(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function U(a){a=rb(a,!1,[]).join("");return V(a)}function V(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function yb(a){a=rb(a,!1,[]).join("");return zb(a)}function zb(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function O(a){return rb(a,!1,[]).join("").trim()};function vb(){this.version=void 0}k(vb,tb);function wb(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return xb(a,b);return null}function xb(a,b){a.version=b.getAttribute("version").trim();return(a=S({version:a.version},Ab,b,[]))?a:null}function W(a,b){return S({},Bb,a,b)}function Cb(a,b){return S({},Db,a,b)}function Eb(a,b){if(b=W(a,b))return a=[zb(a.getAttribute("width")),zb(a.getAttribute("height"))],b.size=a,b}function Fb(a,b){return S([],Gb,a,b)}
var X=[null,"http://www.opengis.net/wms"],Ab=R(X,{Service:Q(function(a,b){return S({},Hb,a,b)}),Capability:Q(function(a,b){return S({},Ib,a,b)})}),Ib=R(X,{Request:Q(function(a,b){return S({},Jb,a,b)}),Exception:Q(function(a,b){return S([],Kb,a,b)}),Layer:Q(function(a,b){return S({},Lb,a,b)})}),Hb=R(X,{Name:Q(O),Title:Q(O),Abstract:Q(O),KeywordList:Q(Fb),OnlineResource:Q(qb),ContactInformation:Q(function(a,b){return S({},Mb,a,b)}),Fees:Q(O),AccessConstraints:Q(O),LayerLimit:Q(yb),MaxWidth:Q(yb),MaxHeight:Q(yb)}),
Mb=R(X,{ContactPersonPrimary:Q(function(a,b){return S({},Nb,a,b)}),ContactPosition:Q(O),ContactAddress:Q(function(a,b){return S({},Ob,a,b)}),ContactVoiceTelephone:Q(O),ContactFacsimileTelephone:Q(O),ContactElectronicMailAddress:Q(O)}),Nb=R(X,{ContactPerson:Q(O),ContactOrganization:Q(O)}),Ob=R(X,{AddressType:Q(O),Address:Q(O),City:Q(O),StateOrProvince:Q(O),PostCode:Q(O),Country:Q(O)}),Kb=R(X,{Format:sb()}),Lb=R(X,{Name:Q(O),Title:Q(O),Abstract:Q(O),KeywordList:Q(Fb),CRS:P(O),EX_GeographicBoundingBox:Q(function(a,
b){var c=S({},Pb,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var e=c.eastBoundLongitude,c=c.northBoundLatitude;return void 0===a||void 0===b||void 0===e||void 0===c?void 0:[a,b,e,c]}}),BoundingBox:P(function(a){var b=[V(a.getAttribute("minx")),V(a.getAttribute("miny")),V(a.getAttribute("maxx")),V(a.getAttribute("maxy"))],c=[V(a.getAttribute("resx")),V(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:P(function(a){return{name:a.getAttribute("name"),
units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:T(a.getAttribute("multipleValues")),nearestValue:T(a.getAttribute("nearestValue")),current:T(a.getAttribute("current")),values:O(a)}}),Attribution:Q(function(a,b){return S({},Qb,a,b)}),AuthorityURL:P(function(a,b){if(b=W(a,b))return b.name=a.getAttribute("name"),b}),Identifier:P(O),MetadataURL:P(function(a,b){if(b=W(a,b))return b.type=a.getAttribute("type"),b}),DataURL:P(W),FeatureListURL:P(W),
Style:P(function(a,b){return S({},Rb,a,b)}),MinScaleDenominator:Q(U),MaxScaleDenominator:Q(U),Layer:P(function(a,b){var c=b[b.length-1],e=S({},Lb,a,b);if(e)return b=T(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),e.queryable=void 0!==b?b:!1,b=zb(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),e.cascaded=b,b=T(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),e.opaque=void 0!==b?b:!1,b=T(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),e.noSubsets=void 0!==b?b:!1,(b=V(a.getAttribute("fixedWidth")))||
(b=c.fixedWidth),e.fixedWidth=b,(a=V(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),e.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(e[a]=(e[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in e||(e[a]=c[a])}),e})}),Qb=R(X,{Title:Q(O),OnlineResource:Q(qb),LogoURL:Q(Eb)}),Pb=R(X,{westBoundLongitude:Q(U),eastBoundLongitude:Q(U),southBoundLatitude:Q(U),northBoundLatitude:Q(U)}),
Jb=R(X,{GetCapabilities:Q(Cb),GetMap:Q(Cb),GetFeatureInfo:Q(Cb)}),Db=R(X,{Format:P(O),DCPType:P(function(a,b){return S({},Sb,a,b)})}),Sb=R(X,{HTTP:Q(function(a,b){return S({},Tb,a,b)})}),Tb=R(X,{Get:Q(W),Post:Q(W)}),Rb=R(X,{Name:Q(O),Title:Q(O),Abstract:Q(O),LegendURL:P(Eb),StyleSheetURL:Q(W),StyleURL:Q(W)}),Bb=R(X,{Format:Q(O),OnlineResource:Q(qb)}),Gb=R(X,{Keyword:sb()});var Ub;
(function(){function a(a,b,d){function f(a,b,c){b.U||(b.O=!0,b.Abstract="layer_invalid_no_name");if(!b.O){b.Ca=a.L.Ia;b.gb=a.version;b.id="WMS||"+b.Ca+"||"+b.U;var d;a:{d=c.i;if(b.ba)for(var e=0,p=b.ba.length;e<p;e++){var u=b.ba[e],la=u.crs||u.bb;if(la&&la.toUpperCase()==d.toUpperCase()){d=u.extent;break a}}if(e=b.Fa||b.Ga)if(p=Ja(c.B(),d,"EPSG:4326"),u=[Infinity,Infinity,-Infinity,-Infinity],p[0]<=e[2]&&p[2]>=e[0]&&p[1]<=e[3]&&p[3]>=e[1]&&(u[0]=p[0]>e[0]?p[0]:e[0],u[1]=p[1]>e[1]?p[1]:e[1],u[2]=p[2]<
e[2]?p[2]:e[2],u[3]=p[3]<e[3]?p[3]:e[3]),u){d=Ja(u,"EPSG:4326",d);break a}d=void 0}b.extent=d;d=c.i;if(e="1.3.0"==a.version)e=b.Ea||b.Ja||[],e=!(-1!=e.indexOf(d.toUpperCase())||-1!=e.indexOf(d.toLowerCase()));e&&(b.eb=!0,b.extent||(b.O=!0,b.Abstract="layer_invalid_outside_map"))}if(b.h){for(d=0;d<b.h.length;d++)f(a,b.h[d],c)||(b.h.splice(d,1),d--);0==b.h.length&&(b.h=void 0)}return b.O&&!b.h?void 0:b}return{restrict:"A",templateUrl:d,scope:{Sa:"=ngeoWmsGetCap",map:"=ngeoWmsGetCapMap",options:"=ngeoWmsGetCapOptions"},
link:function(d){d.layers=[];d.options=d.options||{};d.$watch("getCap",function(h){var n;try{h=ub(h)}catch(r){n=r}if(n||!h)a.console.error("WMS GetCap parsing failed: ",n||h),d.fb="parse_failed";else if(d.wa="",d.layers=[],d.options.F=null,d.options.V=null,h&&h.L&&h.ca&&(h.L.ma&&(d.wa=b.getString("wms_max_size_allowed")+" "+h.L.ma+" * "+h.L.Ha),h.ca.h&&(h=f(h,h.ca.h,d.map.ra().Ta()))))d.layers=h.h||[h]});d.La=function(){var f=d.options.F;if(f&&d.options.oa){var n="add_wms_layer_succeeded";try{var r=
d.options.oa(f);r&&d.map.Ka(r)}catch(l){a.console.error("Add layer failed:"+l),n="add_wms_layer_failed"+l.message}a.alert(b.getString(n))}};d.Ra=function(){return b.getString((d.options.F||d.options.V||{}).Abstract)||""}}}}var b=angular.module("ngeo.wmsGetCapDirective",["gettext"]);Ub=b;b.value("ngeoWmsGetCapTemplateUrl",function(a,b){a=b.ngeoWmsGetCapTemplateUrl;return void 0!==a?a:N+"/../../modules/import/partials/wms-get-cap.html"});a.$inject=["$window","gettextCatalog","ngeoWmsGetCapTemplateUrl"];
b.directive("ngeoWmsGetCap",a)})();var Vb;
(function(){function a(a,b){return{restrict:"A",templateUrl:b,controller:"NgeoWmsGetCapItemDirectiveController",compile:function(b){var c=b.contents().remove(),d;return function(b,f){d||(d=a(c));d(b,function(a){f.append(a)});var l=f.find("> .ngeo-header-group"),p=l.find(".fa-plus"),u;l.find(".fa-zoom-in").on("click",function(a){a.stopPropagation();a:{var c=b.layer,d=b.map,e=c.extent;b.options.ka&&(e=b.options.ka(c.extent));a=d.ra();var f=[d.Wa-d.Ya+1,d.Xa-d.Za+1];if(c.da&&e){var g=2834.64*a.qa(e,
f);if(g>c.da){d=ta(e);g/=c.da;c=(e[2]-e[0])/g;e=(e[3]-e[1])/g;e=[d[0]-c/2,d[1]-e/2,d[0]+c/2,d[1]+e/2];if(e=b.options.ka(e))e=a.Oa(a.qa(e,f),0,-1),a.$a(d),a.ab(e);break a}}e&&a.Qa(e,f)}});p.on("click",function(a){a.stopPropagation();p.toggleClass("fa-minus");u||(u=f.find("> .ngeo-child-group"));u.slideToggle()})}}}}function b(a){a.na=function(b,c){b.stopPropagation();a.options.V=c;c.O||a.options.na(a.map,c)};a.Aa=function(b){b.stopPropagation();a.options.V=null;a.options.Aa(a.map)};a.a=function(b,
c){b.stopPropagation();a.options.F=a.options.F&&a.options.F.U==c.U?null:c}}var c=angular.module("ngeo.wmsGetCapItemDirective",[]);Vb=c;c.value("ngeoWmsGetCapItemTemplateUrl",function(a,b){a=b.ngeoWmsGetCapItemTemplateUrl;return void 0!==a?a:N+"/../../modules/import/partials/wms-get-cap-item.html"});b.$inject=["$scope"];c.controller("NgeoWmsGetCapItemDirectiveController",b);a.$inject=["$compile","ngeoWmsGetCapItemTemplateUrl"];c.directive("ngeoWmsGetCapItem",a)})();var Wb;Wb=angular.module("ngeo.import",[mb.name,nb.name,ob.name,pb.name,Ub.name,Vb.name]);var Xb=angular.module("ngeo",[lb.name,Wb.name,"gettext","ui.date","floatThead"]),N="ngeo";ba("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});ba("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});function Yb(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Yb);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ca(Yb,Error);Yb.prototype.name="CustomError";function Zb(a,b){for(var c=a.split("%s"),e="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)e+=c.shift()+d.shift();return e+c.join("%s")};function $b(a,b){b.unshift(a);Yb.call(this,Zb.apply(null,b));b.shift()}ca($b,Yb);$b.prototype.name="AssertionError";function ac(a,b){throw new $b("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};Xb.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:N+"/popup.html"});function bc(a){return{restrict:"A",templateUrl:a,link:function(a,c){c.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());c.addClass("hidden")};a.$watch("open",function(a){c.css("display",a?"block":"none")})}}}bc.$inject=["ngeoPopupTemplateUrl"];Xb.directive("ngeoPopup",bc);function Y(a,b,c,e){this.scope=b.$new(!0);this.scope.$watch(function(){return this.scope.open}.bind(this),function(a){!a&&this.c&&this.g(function(){this.destroy()}.bind(this))}.bind(this));this.b=c;this.g=e;this.a=angular.element("<div ngeo-popup></div>");this.c=!1;a(this.a)(this.scope);angular.element(document.body).append(this.a)}Y.prototype.pa=function(){return this.scope.open};Y.prototype.getOpen=Y.prototype.pa;Y.prototype.J=function(a){this.scope.open=a};Y.prototype.setOpen=Y.prototype.J;
Y.prototype.destroy=function(){this.scope.$destroy();this.a.remove()};Y.prototype.destroy=Y.prototype.destroy;Y.prototype.K=function(a){a=this.b.trustAsHtml(a);this.scope.title=a};Y.prototype.setTitle=Y.prototype.K;Y.prototype.I=function(a,b){this.scope.content=b?this.b.trustAsHtml(a):a};Y.prototype.setContent=Y.prototype.I;Y.prototype.W=function(a){a=this.b.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.I(a)};Y.prototype.setUrl=Y.prototype.W;
Y.prototype.T=function(a){this.a.width(a);this.a.css("max-width",a)};Y.prototype.setWidth=Y.prototype.T;Y.prototype.S=function(a){this.a.height(a)};Y.prototype.setHeight=Y.prototype.S;Y.prototype.ja=function(a,b){this.T(a);this.S(b)};Y.prototype.setSize=Y.prototype.ja;Y.prototype.H=function(a){this.c=a};Y.prototype.setAutoDestroy=Y.prototype.H;Y.prototype.addClass=function(a){this.a.addClass(a)};Y.prototype.addClass=Y.prototype.addClass;
Y.prototype.open=function(a){a.url?this.W(a.url):a.content?this.I(a.content):ac('ngeo.Popup options requirest "url" or "content".');void 0!==a.autoDestroy&&this.H(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.S(a.height);void 0!==a.title&&this.K(a.title);void 0!==a.width&&this.T(a.width);this.J(!0)};Y.prototype.open=Y.prototype.open;function cc(a,b,c,e){return function(){return new Y(a,b,c,e)}}cc.$inject=["$compile","$rootScope","$sce","$timeout"];
Xb.factory("ngeoCreatePopup",cc);var dc=angular.module("app",["ngeo"]);function Z(a,b){this.b=a;this.a=b;$('[data-toggle="tooltip"]').tooltip({container:"body",trigger:"hover"})}Z.$inject=["$sce","ngeoCreatePopup"];Z.prototype.Ba=function(){var a=this.a();a.H(!0);a.K("Simple popup");var b=this.b.trustAsHtml("This is a simple 400x300 px popup.");a.I(b);a.T("400px");a.S("300px");a.J(!0)};Z.prototype.simplePopup=Z.prototype.Ba;
Z.prototype.ua=function(){var a=this.a();a.H(!0);a.addClass("popup-with-iframe");a.K("Iframe popup");a.W("http://geomapfish.org/");a.ja("400px","300px");a.J(!0)};Z.prototype.iframePopup=Z.prototype.ua;
Z.prototype.ta=function(){var a=this.a();a.H(!0);a.K("This is a popup with lots and lots of content and a very long title");var b=this.b.trustAsHtml("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla egetquam at ex euismod bibendum et eget enim. Nulla sodales tortor acsagittis aliquet. Ut malesuada quam vitae pulvinar porta. Nunc idmagna id risus malesuada elementum eget id purus. Curabitur vel augueblandit, faucibus nulla quis, consequat tellus. Phasellus commodo,tellus et vulputate ultricies, nulla libero ornare arcu, quisfermentum sem diam quis tellus. Aliquam ut sapien tristique, laciniaante et, lacinia arcu. Quisque sagittis eros at quam blanditgravida. Nulla sit amet enim semper, efficitur eros sit amet,porttitor libero. Fusce quis tellus est. Quisque ornare, ex egetluctus pharetra, nisl leo lobortis purus, sed tristique neque leo egetodio. Maecenas lobortis nisl ac magna mollis, ac pulvinar risusconvallis. Donec ullamcorper sollicitudin maximus. Quisque bibendumelit sit amet ultrices ornare. Donec aliquam felis id urna ultricesscelerisque.");a.I(b);
a.J(!0)};Z.prototype.heavyPopup=Z.prototype.ta;Z.prototype.xa=function(){var a=this.a(),b=this.b.trustAsHtml("This popup was opened using the <code>open</code> method.");a.open({autoDestroy:!0,content:b,height:"200px",title:'Opened with "open"',width:"300px"})};Z.prototype.openPopupWithContent=Z.prototype.xa;Z.prototype.ya=function(){this.a().open({autoDestroy:!0,cls:"popup-with-iframe",height:"300px",title:'Opened with "open" and "iframe"',url:"http://geomapfish.org/",width:"400px"})};
Z.prototype.openPopupWithUrl=Z.prototype.ya;dc.controller("MainController",Z);(function(){function a(a){a.put("ngeo/attributes.html",'<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></label> <div ng-switch=attribute.type> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <div ng-show="form.$submitted || form[attribute.name].$touched"> <p class=text-danger ng-show=form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> ');
a.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');a.put("ngeo/grid.html",'<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name)>{{columnDefs.name | translate}} <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> ');
a.put("ngeo/scaleselector.html",'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html=scaleselectorCtrl.currentScale|ngeoScalify></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=::scaleselectorCtrl.getScale(zoomLevel)|ngeoScalify> </a> </li> </ul> </div> ');
a.put("ngeo/datepicker.html","<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if=\"::datepickerCtrl.time.widget === 'datepicker'\"> <div class=ngeo-datepicker-start-date> <span ng-if=\"::datepickerCtrl.time.mode === 'range'\" translate>From:</span> <span ng-if=\"::datepickerCtrl.time.mode !== 'range'\" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required> </div> <div class=ngeo-datepicker-end-date ng-if=\"::datepickerCtrl.time.mode === 'range'\"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required> </div> </div> </form> </div> ");
a.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/colorpicker.html",'<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> ')}a.$inject=["$templateCache"];Xb.run(a)})();}).call(window);
//# sourceMappingURL=popupservice.js.map
